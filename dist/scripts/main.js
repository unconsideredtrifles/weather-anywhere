(()=>{"use strict";const e=function(e){return{status:e.condition.text,icon:`https:${e.condition.icon.replace("64x64","128x128")}`,temp:{celsius:`${e.temp_c?e.temp_c:e.avgtemp_c}°C`,fahrenheit:`${e.temp_f?e.temp_f:e.avgtemp_f}°F`}}},t=function(e,t){e.querySelector(".weather-result-text").textContent=t.status,e.querySelector(".weather-icon").style.backgroundImage=`url("${t.icon}")`,e.querySelector(".weather-temperature").textContent=t.temp.celsius},n=document.getElementsByClassName("loading-indicator")[0],r=document.getElementsByClassName("error-text")[0],a=document.getElementsByClassName("body-section-layout")[0],o=function(){n.classList.add("display-none")},s=function(){r.classList.add("display-none")},c=function(){a.classList.add("display-none")},i=document.getElementsByClassName("search-input")[0];i.addEventListener("keydown",(e=>{"Enter"===e.key&&0===e.currentTarget.value.length&&e.preventDefault()}));const u=function(i){s(),c(),n.classList.remove("display-none"),function(t){return async function(e){let t;try{if(t=await fetch(e,{signal:AbortSignal.timeout(5e3)}),!t.ok)throw new Error("Bad HTTP Response");return await t.json()}catch({name:e,message:n}){if("AbortError"===e)throw new Error("Connection timeout");if("Bad HTTP Response"!==n)throw new Error("Network error or permission issue");if("application/json"===t.headers.get("Content-Type")){const e=await t.json();throw new Error(e.error.message)}throw new Error(`${n}`)}}(`https://api.weatherapi.com/v1/forecast.json?key=4c35c5219c504ec58a3120808242901&q=${t}&days=3`).then((t=>{return{currentWeather:e((n=t).current),weatherForecasts:n.forecast.forecastday.map((t=>{return{date:t.date,weekDay:(n=t.date,["Sun","Mon","Tue","Wed","Thurs","Fri","Sat"][new Date(n).getDay()]),...e(t.day)};var n})),city:n.location.name};var n}))}(i).then((e=>{if(n=i,r=e.city,n.trim().toLowerCase()!==r.trim().toLowerCase())throw new Error("No matching location found.");var n,r;o(),o(),s(),a.classList.remove("display-none"),function(e){document.getElementsByClassName("city-name")[0].textContent=e}(i),function(e){const n=document.getElementsByClassName("current-weather")[0];t(n,e)}(e.currentWeather),function(e){const n=[...document.getElementsByClassName("weather-date")];[...document.getElementsByClassName("weather-prediction")[0].getElementsByClassName("weather-card")].forEach(((r,a)=>{!function(e,t,n=!1){const r=t,a=e.children[0];a.textContent=t.date,a.setAttribute("datetime",t.date),n&&(r.weekDay=`Today/${r.weekDay}`),e.children[2].textContent=`(${r.weekDay})`}(n[a],e[a],!a),t(r,e[a])}))}(e.weatherForecasts)})).catch((e=>{(function(e){o(),c(),r.textContent=e,r.classList.remove("display-none")})(`"${e}"`.replaceAll('"',"").split("Error: ")[1])}))};u("New York"),document.getElementsByClassName("search-bar")[0].addEventListener("submit",(e=>{const t=e.currentTarget.querySelector(".search-input").value;u(t),i.value="",e.preventDefault()}))})();